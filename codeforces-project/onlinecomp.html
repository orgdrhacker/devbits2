<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>C++ Online Compiler - Judge0 API Example</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white">
  <!-- Navigation Header (Base Layout) -->
  <header class="bg-gray-800 p-4 shadow-lg w-full">
    <nav class="flex items-center">
      <!-- Left: Website Name -->
      <div>
        <a href="index.html" class="text-2xl font-bold pl-4">Coderia</a>
      </div>
      <!-- Right: Navigation Links -->
      <div class="flex ml-auto items-center space-x-6 pr-4">
        <a href="index.html" class="text-lg font-semibold hover:underline">HOME</a>
        <a href="profile.html" class="text-lg font-semibold hover:underline">PROFILE</a>
        <a href="submissions.html" class="text-lg font-semibold hover:underline">SUBMISSIONS</a>
        <a href="contest_list.html" class="text-lg font-semibold hover:underline">CONTESTS</a>
        <a href="problemset.html" class="text-lg font-semibold hover:underline">PROBLEMSET</a>
        <a href="compare.html" class="text-lg font-semibold hover:underline">COMPARE</a>
        <div id="auth-item">
          <a href="login.html" id="auth-link" class="text-lg font-semibold hover:underline">LOGIN</a>
        </div>
      </div>
    </nav>
  </header>

  <!-- Main Content Container -->
  <div class="max-w-4xl mx-auto mt-12 bg-gray-800 p-6 rounded-lg shadow-lg">
    <h1 class="text-3xl font-bold text-center mb-4">C++ Online Compiler Test</h1>
    <p class="text-center text-gray-300 mb-6">
      Write or paste your C++ code below, add any input if necessary, and click "Run Code".
    </p>
    
    <!-- Code Editor -->
    <div class="mb-4">
      <label for="codeArea" class="block text-lg mb-2">C++ Code:</label>
      <textarea id="codeArea" rows="10" class="w-full p-2 rounded bg-gray-700 text-white" placeholder="#include &lt;iostream&gt;
using namespace std;
int main(){
    cout << &quot;Hello, World!&quot; << endl;
    return 0;
}"></textarea>
    </div>
    
    <!-- STDIN Input -->
    <div class="mb-4">
      <label for="inputArea" class="block text-lg mb-2">Input (STDIN):</label>
      <textarea id="inputArea" rows="4" class="w-full p-2 rounded bg-gray-700 text-white" placeholder="Enter input if needed"></textarea>
    </div>
    
    <!-- Run Code Button -->
    <div class="flex justify-center mb-4">
      <button id="runCodeBtn" class="bg-blue-500 px-6 py-2 rounded text-white hover:bg-blue-600">Run Code</button>
    </div>
    
    <!-- Output Section -->
    <div class="mb-4">
      <label for="outputArea" class="block text-lg mb-2">Output:</label>
      <pre id="outputArea" class="w-full p-4 bg-gray-700 rounded text-white"></pre>
    </div>
  </div>
  
  <script>
    async function runCode() {
      const code = document.getElementById('codeArea').value;
      const input = document.getElementById('inputArea').value;
      const outputArea = document.getElementById('outputArea');
      outputArea.textContent = "Running code...";
      
      // Build the payload for Judge0 API
      const payload = {
        source_code: code,
        language_id: 54,  // C++ (GCC 9.2.0); adjust if necessary
        stdin: input
      };
      
      try {
        // Judge0 public endpoint with wait=true for synchronous response.
        const response = await fetch("https://ce.judge0.com/submissions?base64_encoded=false&wait=true", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(payload)
        });
        
        if (!response.ok) {
          throw new Error("HTTP error! Status: " + response.status);
        }
        
        const data = await response.json();
        console.log("Judge0 response:", data);
        
        let output = "";
        if (data.stdout) output += data.stdout;
        if (data.stderr) output += "\n" + data.stderr;
        if (data.compile_output) output += "\n" + data.compile_output;
        outputArea.textContent = output || "No output.";
      } catch (error) {
        console.error("Fetch error:", error);
        outputArea.textContent = "Error: " + error.message;
      }
    }
    
    document.getElementById("runCodeBtn").addEventListener("click", runCode);
  </script>
</body>
</html>
